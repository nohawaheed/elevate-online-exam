import{b as K,c as _,e as I,f as R,g as C,h as S,j as N,k,l as j,n as $,o as Q,p as W,q as ie,r as se,s as D,t as G,u as q,v as L,w as O}from"./chunk-2USAG3GY.js";import{p as A,q as E}from"./chunk-EM3OHNVD.js";import{h as M,i as oe,p as V}from"./chunk-2DMQBI2T.js";import"./chunk-Q64FFBLU.js";import"./chunk-XZZS7UHB.js";import{$ as Z,D as Y,Db as T,Eb as re,Ja as a,Ka as p,M as w,_a as f,aa as b,ab as s,cb as y,eb as J,fb as g,gb as l,hb as m,ib as i,j as x,ja as B,ka as U,mb as z,nb as h,ob as u,qa as ee,ra as H,wb as v,y as X,yb as te}from"./chunk-KRDMLW7E.js";function _e(t,d){t&1&&i(0,"app-error-message",9),t&2&&s("message","Please enter a valid code")}function ve(t,d){t&1&&i(0,"app-error-message",9),t&2&&s("message","Code is required")}function Ce(t,d){if(t&1&&f(0,_e,1,1,"app-error-message",9)(1,ve,1,1),t&2){let e,o=u();g(0,!((e=o.verifyForm.get("resetCode"))==null||e.errors==null)&&e.errors.pattern?0:!((e=o.verifyForm.get("resetCode"))==null||e.errors==null)&&e.errors.required?1:-1)}}function we(t,d){if(t&1&&(l(0,"span",7),v(1),m()),t&2){let e=u();a(),te("Resend in ",e.count+"s"," ")}}function he(t,d){if(t&1){let e=z();l(0,"app-button",10),h("buttonClicked",function(){B(e);let r=u();return U(r.resendCode())}),m()}if(t&2){let e=u();s("label","Resend")("type","button")("width","fit-content")("loading",e.resendLoading)("disabled",!1)("padding","0")("background","transparent")("color","#4461F2")}}var ce=(()=>{class t{constructor(e,o,r,n){this._ngxAuthApiService=e,this.messageService=o,this.router=r,this.authService=n,this.verifyForm=new C({}),this.destroy$=new x,this.resendLoading=!1,this.verifyLoading=!1,this.count=60,this.nextStep=ee(),this.email=H.required()}ngOnInit(){if(this.verifyForm=new C({resetCode:new S(null,[_.required,_.pattern(/^[0-9]{6}$/)])}),this.authService.isPlatformBrowser())X(0,1e3).pipe(w(this.destroy$),Y(60)).subscribe(()=>{this.count--});else return}submit(){this.verifyLoading=!0,this._ngxAuthApiService.verifyCode(this.verifyForm.value).subscribe({next:e=>{e.status==="Success"&&(this.verifyLoading=!1,this.messageService.add({severity:"success",summary:"Success",detail:e.status}),setTimeout(()=>{this.nextStep.emit(3)},2e3))},error:e=>{this.verifyLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}})}resendCode(){this.resendLoading=!0,this._ngxAuthApiService.recoverPassword({email:this.email()}).pipe(w(this.destroy$)).subscribe({next:e=>{e.message==="success"&&(this.resendLoading=!1,this.messageService.add({severity:"success",summary:"Success",detail:e.info}))},error:e=>{this.resendLoading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(p(L),p(V),p(M),p(O))}}static{this.\u0275cmp=b({type:t,selectors:[["app-verify-code"]],inputs:{email:[Z.SignalBased,"email"]},outputs:{nextStep:"nextStep"},standalone:!0,features:[T],decls:14,vars:10,consts:[[1,"verify","flex","flex-column"],[1,"mb-5","mt-0"],["position","top-center"],[3,"ngSubmit","formGroup"],[1,"card","flex","w-full","flex-column","justify-content-center"],["type","string","placeholder","Enter Code","pInputText","","formControlName","resetCode",1,"w-full","inter","inter-500"],[1,"ml-auto","m-0","verify-code","poppins","poppins-400"],[1,"verify-code-count"],["label","Verify",3,"type","loading","disabled"],[3,"message"],[3,"buttonClicked","label","type","width","loading","disabled","padding","background","color"]],template:function(o,r){if(o&1&&(l(0,"div",0)(1,"h2",1),v(2,"Verify code"),m(),i(3,"p-toast",2),l(4,"form",3),h("ngSubmit",function(){return r.submit()}),l(5,"div",4),i(6,"input",5),f(7,Ce,2,1),l(8,"p",6),v(9,"Didn\u2019t receive a code? "),f(10,we,2,1,"span",7)(11,he,1,8),m(),i(12,"app-button",8),m()(),i(13,"app-register-methods"),m()),o&2){let n,c;a(4),s("formGroup",r.verifyForm),a(2),J("ng-invalid ng-dirty"),y("mb-5",!((n=r.verifyForm.get("resetCode"))!=null&&n.errors&&((n=r.verifyForm.get("resetCode"))!=null&&n.touched||(n=r.verifyForm.get("resetCode"))!=null&&n.dirty))),a(),g(7,(c=r.verifyForm.get("resetCode"))!=null&&c.errors&&((c=r.verifyForm.get("resetCode"))!=null&&c.touched||(c=r.verifyForm.get("resetCode"))!=null&&c.dirty)?7:-1),a(3),g(10,r.count>0?10:11),a(2),s("type","submit")("loading",r.verifyLoading)("disabled",!r.verifyForm.valid)}},dependencies:[$,N,K,I,R,k,j,W,Q,D,q,G,E,A],styles:[".verify-code[_ngcontent-%COMP%]{margin-bottom:2.5em!important;color:#313131}.verify-code_resend[_ngcontent-%COMP%]{color:#4461f2;border:unset;background-color:unset;font-size:1rem;cursor:pointer}"]})}}return t})();function ye(t,d){t&1&&i(0,"app-error-message",8),t&2&&s("message","Password must be at least 6 characters long and contain at least one letter and one special character")}function Se(t,d){t&1&&i(0,"app-error-message",8),t&2&&s("message","Password is required")}function Pe(t,d){if(t&1&&f(0,ye,1,1,"app-error-message",8)(1,Se,1,1),t&2){let e,o=u();g(0,!((e=o.resetPasswordForm.get("password"))==null||e.errors==null)&&e.errors.pattern?0:!((e=o.resetPasswordForm.get("password"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Fe(t,d){t&1&&i(0,"app-error-message",8),t&2&&s("message","Passwords do not match")}function xe(t,d){t&1&&i(0,"app-error-message",8),t&2&&s("message","rePassword is required")}function be(t,d){if(t&1&&f(0,Fe,1,1,"app-error-message",8)(1,xe,1,1),t&2){let e,o=u();g(0,!((e=o.resetPasswordForm.get("rePassword"))==null||e.errors==null)&&e.errors.passwordMismatch?0:!((e=o.resetPasswordForm.get("rePassword"))==null||e.errors==null)&&e.errors.required?1:-1)}}var fe=(()=>{class t{constructor(e,o,r,n){this._ngxAuthApiService=e,this._authService=o,this.messageService=r,this.router=n,this.resetPasswordForm=new C({}),this.destroy$=new x,this.loading=!1,this.email=H.required()}ngOnInit(){this.resetPasswordForm=new C({password:new S(null,[_.required,_.pattern(/^(?=.*[A-Za-z])(?=.*[@$!%*#?&^_-]).{8,}/)]),rePassword:new S(null,[_.required,this._authService.passwordMatchValidator()])}),this.resetPasswordForm.get("password")?.valueChanges.pipe(w(this.destroy$)).subscribe(()=>this.resetPasswordForm.get("rePassword")?.updateValueAndValidity())}submit(){this.loading=!0,this._ngxAuthApiService.resetPassword({email:this.email(),newPassword:this.resetPasswordForm.value.password}).pipe(w(this.destroy$)).subscribe({next:e=>{this.loading=!1,this.messageService.add({severity:"success",summary:"Success",detail:e.message}),this._authService.saveUserToken(!1,e.token),setTimeout(()=>{this.router.navigate(["/home"])},2e3)},error:e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(p(L),p(O),p(V),p(M))}}static{this.\u0275cmp=b({type:t,selectors:[["app-reset-password"]],inputs:{email:[Z.SignalBased,"email"]},standalone:!0,features:[T],decls:12,vars:14,consts:[[1,"forgot","flex","flex-column"],[1,"forgot-header","mb-5","mt-0"],["position","top-center"],[3,"ngSubmit","formGroup"],[1,"card","flex","w-full","flex-column","justify-content-center"],["formControlName","password","placeholder","Create Password",3,"styleClass","toggleMask"],["formControlName","rePassword","placeholder","Re-enter Password",3,"styleClass","toggleMask"],["label","Sign in",3,"type","loading","disabled"],[3,"message"]],template:function(o,r){if(o&1&&(l(0,"div",0)(1,"h2",1),v(2,"Set a Password"),m(),i(3,"p-toast",2),l(4,"form",3),h("ngSubmit",function(){return r.submit()}),l(5,"div",4),i(6,"p-password",5),f(7,Pe,2,1),i(8,"p-password",6),f(9,be,2,1),i(10,"app-button",7),m()(),i(11,"app-register-methods"),m()),o&2){let n,c,P,F;a(4),s("formGroup",r.resetPasswordForm),a(2),y("mb-5",!((n=r.resetPasswordForm.get("password"))!=null&&n.errors&&((n=r.resetPasswordForm.get("password"))!=null&&n.touched||(n=r.resetPasswordForm.get("password"))!=null&&n.dirty))),s("styleClass","w-full")("toggleMask",!0),a(),g(7,(c=r.resetPasswordForm.get("password"))!=null&&c.errors&&((c=r.resetPasswordForm.get("password"))!=null&&c.touched||(c=r.resetPasswordForm.get("password"))!=null&&c.dirty)?7:-1),a(),y("mb-5",!((P=r.resetPasswordForm.get("rePassword"))!=null&&P.errors&&((P=r.resetPasswordForm.get("rePassword"))!=null&&P.touched||(P=r.resetPasswordForm.get("rePassword"))!=null&&P.dirty))),s("styleClass","w-full")("toggleMask",!0),a(),g(9,(F=r.resetPasswordForm.get("rePassword"))!=null&&F.errors&&((F=r.resetPasswordForm.get("rePassword"))!=null&&F.touched||(F=r.resetPasswordForm.get("rePassword"))!=null&&F.dirty)?9:-1),a(),s("type","submit")("loading",r.loading)("disabled",!1)}},dependencies:[$,N,I,R,k,j,D,se,ie,G,q,E,A],styles:[".p-inputtext{width:100%!important;font-family:Inter,sans-serif!important;font-weight:500!important}"]})}}return t})();var Te=()=>["/login"];function Me(t,d){t&1&&i(0,"app-error-message",9),t&2&&s("message","Please enter a valid email address")}function Ve(t,d){t&1&&i(0,"app-error-message",9),t&2&&s("message","Email is required")}function Ae(t,d){if(t&1&&f(0,Me,1,1,"app-error-message",9)(1,Ve,1,1),t&2){let e,o=u(2);g(0,!((e=o.forgotPasswordForm.get("email"))==null||e.errors==null)&&e.errors.email?0:!((e=o.forgotPasswordForm.get("email"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Ee(t,d){if(t&1){let e=z();l(0,"div",0)(1,"h2",1),v(2,"Forgot your password?"),m(),i(3,"p-toast",2),l(4,"form",3),h("ngSubmit",function(){B(e);let r=u();return U(r.submit())}),l(5,"div",4),i(6,"input",5),f(7,Ae,2,1),l(8,"app-button",6),v(9," Recover Password ? "),m(),l(10,"a",7),i(11,"app-button",8),m()()(),i(12,"app-register-methods"),m()}if(t&2){let e,o,r=u();a(4),s("formGroup",r.forgotPasswordForm),a(2),J("ng-invalid ng-dirty"),y("mb-5",!((e=r.forgotPasswordForm.get("email"))!=null&&e.errors&&((e=r.forgotPasswordForm.get("email"))!=null&&e.touched||(e=r.forgotPasswordForm.get("email"))!=null&&e.dirty))),a(),g(7,(o=r.forgotPasswordForm.get("email"))!=null&&o.errors&&((o=r.forgotPasswordForm.get("email"))!=null&&o.touched||(o=r.forgotPasswordForm.get("email"))!=null&&o.dirty)?7:-1),a(),s("loading",r.loading)("label","Recover Password ?")("padding","0")("background","transparent")("color","#4461F2")("disabled",!r.forgotPasswordForm.valid)("type","submit"),a(2),s("routerLink",re(16,Te)),a(),s("type","button")("disabled",!1)}}function Ie(t,d){if(t&1){let e=z();l(0,"app-verify-code",10),h("nextStep",function(r){B(e);let n=u();return U(n.nextStep(r))}),m()}if(t&2){let e,o=u();s("email",(e=o.forgotPasswordForm.get("email"))==null?null:e.value)}}function Re(t,d){if(t&1&&i(0,"app-reset-password",11),t&2){let e,o=u();s("email",(e=o.forgotPasswordForm.get("email"))==null?null:e.value)}}var pt=(()=>{class t{constructor(e,o,r,n){this._ngxAuthApiService=e,this.router=o,this.messageService=r,this.authService=n,this.forgotPasswordForm=new C({}),this.destroy$=new x,this.loading=!1,this.currentStep=1}ngOnInit(){this.forgotPasswordForm=new C({email:new S(null,[_.email,_.required])})}submit(){this.loading=!0,this._ngxAuthApiService.recoverPassword(this.forgotPasswordForm.value).pipe(w(this.destroy$)).subscribe({next:e=>{e.message==="success"&&(this.loading=!1,this.messageService.add({severity:"success",summary:"Success",detail:e.info}),setTimeout(()=>{this.nextStep(2)},2e3))},error:e=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}})}nextStep(e){this.currentStep=e}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static{this.\u0275fac=function(o){return new(o||t)(p(L),p(M),p(V),p(O))}}static{this.\u0275cmp=b({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[T],decls:3,vars:1,consts:[[1,"forgot","flex","flex-column"],[1,"forgot-header","mb-5","mt-0"],["position","top-center"],[3,"ngSubmit","formGroup"],[1,"card","flex","w-full","flex-column","justify-content-center"],["type","email","placeholder","Enter Email","pInputText","","formControlName","email",1,"w-full","inter","inter-500"],[1,"ml-auto","m-0","poppins","poppins-400","forgot-card_recover",3,"loading","label","padding","background","color","disabled","type"],[3,"routerLink"],["label","Sign in",3,"type","disabled"],[3,"message"],[3,"nextStep","email"],[3,"email"]],template:function(o,r){o&1&&f(0,Ee,13,17,"div",0)(1,Ie,1,1)(2,Re,1,1),o&2&&g(0,r.currentStep===1?0:r.currentStep===2?1:r.currentStep===3?2:-1)},dependencies:[$,N,K,I,R,k,j,G,D,q,W,Q,oe,E,A,ce,fe],styles:[".forgot-card_recover[_ngcontent-%COMP%]{margin-bottom:2.5em!important;font-size:1rem}"]})}}return t})();export{pt as ForgotPasswordComponent};
